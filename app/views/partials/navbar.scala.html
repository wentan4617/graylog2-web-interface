@(currentUser: org.graylog2.restclient.models.User)

@import lib.security.RestPermissions._
@import views.helpers.Permissions._
@import org.graylog2.restclient.lib.Configuration
@import org.graylog2.restclient.lib.DateTools
@import views.helpers.Permissions
@import lib.security.RestPermissions
@import play.mvc.Http

<script type="text/javascript">
// needs to be global!
gl2AppPathPrefix = "@Configuration.getApplicationContext";
gl2UserTimeZone = "@DateTools.getUserTimeZone(currentUser)";
gl2UserTimeZoneOffset = @DateTools.getUserTimeZoneOffset(currentUser);
gl2UserSessionId = "@Http.Context.current().session().get("sessionid")";
sockJsWebSocketsEnabled = @lib.SockJSUtils.isWebsocketsEnabled;
</script>

@helper.javascriptRouter("jsRoutes")(
    routes.javascript.Assets.at,
    routes.javascript.AlertsController.index,
    routes.javascript.BundlesController.index,
    routes.javascript.DashboardsController.index,
    routes.javascript.ExtractorsController.newExtractor,
    routes.javascript.GrokPatternsController.index,
    routes.javascript.IndicesController.index,
    routes.javascript.InputsController.index,
    routes.javascript.LoggingController.index,
    routes.javascript.MessagesController.analyze,
    routes.javascript.MessagesController.single,
    routes.javascript.MetricsController.ofNode,
    routes.javascript.NodesController.node,
    routes.javascript.NodesController.nodes,
    routes.javascript.OutputsController.index,
    routes.javascript.RadiosController.show,
    routes.javascript.SavedSearchesController.execute,
    routes.javascript.SavedSearchesController.delete,
    routes.javascript.SearchController.globalSearch,
    routes.javascript.SearchController.index,
    routes.javascript.SearchController.showMessage,
    routes.javascript.SearchController.exportAsCsv,
    routes.javascript.SessionsController.destroy,
    routes.javascript.StartpageController.redirect,
    routes.javascript.StartpageController.set,
    routes.javascript.StreamOutputsController.index,
    routes.javascript.StreamRulesController.index,
    routes.javascript.StreamsController.index,
    routes.javascript.StreamSearchController.index,
    routes.javascript.StreamSearchController.exportAsCsv,
    routes.javascript.SourcesController.list,
    routes.javascript.SystemController.index,
    routes.javascript.UsersController.editUserForm,
    routes.javascript.UsersController.index,
    routes.javascript.CollectorsController.index,
    api.routes.javascript.AlarmCallbacksApiController.available,
    api.routes.javascript.AlarmCallbacksApiController.create,
    api.routes.javascript.AlarmCallbacksApiController.delete,
    api.routes.javascript.AlarmCallbacksApiController.list,
    api.routes.javascript.AlarmCallbacksApiController.update,
    api.routes.javascript.AlarmCallbackHistoryApiController.list,
    api.routes.javascript.AlertsApiController.list,
    api.routes.javascript.DashboardsApiController.addWidget,
    api.routes.javascript.DashboardsApiController.create,
    api.routes.javascript.DashboardsApiController.listWritable,
    api.routes.javascript.DashboardsApiController.update,
    api.routes.javascript.DashboardsApiController.updateWidget,
    api.routes.javascript.DashboardsApiController.widget,
    api.routes.javascript.DashboardsApiController.widgetValue,
    api.routes.javascript.InputsApiController.list,
    api.routes.javascript.InputsApiController.globalRecentMessage,
    api.routes.javascript.OutputsApiController.available,
    api.routes.javascript.OutputsApiController.availableTypes,
    api.routes.javascript.OutputsApiController.delete,
    api.routes.javascript.OutputsApiController.create,
    api.routes.javascript.OutputsApiController.index,
    api.routes.javascript.OutputsApiController.update,
    api.routes.javascript.SavedSearchesApiController.create,
    api.routes.javascript.SavedSearchesApiController.list,
    api.routes.javascript.SavedSearchesApiController.update,
    api.routes.javascript.SearchApiController.fieldStats,
    api.routes.javascript.SearchApiController.fieldTerms,
    api.routes.javascript.StreamOutputsApiController.add,
    api.routes.javascript.StreamOutputsApiController.delete,
    api.routes.javascript.StreamOutputsApiController.index,
    api.routes.javascript.StreamsApiController.list,
    api.routes.javascript.StreamsApiController.get,
    api.routes.javascript.StreamsApiController.create,
    api.routes.javascript.StreamsApiController.delete,
    api.routes.javascript.StreamsApiController.update,
    api.routes.javascript.StreamsApiController.pause,
    api.routes.javascript.StreamsApiController.resume,
    api.routes.javascript.StreamsApiController.cloneStream,
    api.routes.javascript.StreamsApiController.testMatch,
    api.routes.javascript.StreamRulesApiController.list,
    api.routes.javascript.StreamRulesApiController.create,
    api.routes.javascript.StreamRulesApiController.types,
    api.routes.javascript.StreamRulesApiController.update,
    api.routes.javascript.StreamRulesApiController.delete,
    api.routes.javascript.SystemApiController.fields,
    api.routes.javascript.ToolsApiController.naturalDateTest,
    api.routes.javascript.UsersApiController.loadUser
)

<div id="navigation-bar"
    data-permissions='@Permissions.asJson(SEARCHES_ABSOLUTE, SEARCHES_RELATIVE, SEARCHES_KEYWORD, SOURCES_READ, INPUTS_READ, INPUTS_CREATE, INPUTS_EDIT, OUTPUTS_READ, INDICES_READ, LOGGERS_READ, DASHBOARDS_CREATE, USERS_EDIT, STREAMS_CREATE, COLLECTORS_READ)'
    data-request-path="@request.path"
    data-login-name="@currentUser.getName"
    data-full-name="@currentUser.getFullName">
</div>
